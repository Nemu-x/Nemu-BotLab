# Руководство по созданию опросников (Flow) в Telegram боте

## Введение

Функционал "Flow" (опросники) позволяет создавать цепочки сообщений для интерактивного взаимодействия с пользователями бота. С его помощью можно:
- Собирать информацию от пользователей через последовательность вопросов
- Создавать ветвящиеся сценарии в зависимости от ответов пользователя
- Автоматизировать сбор и обработку данных

## Структура опросника

Опросник состоит из:
1. **Flow** - основной контейнер, содержащий метаданные опросника (название, описание и т.д.)
2. **Команды-триггера** - команды, которая запускает опросник
3. **Последовательности шагов** - цепочки команд, которые выполняются последовательно

## Создание опросника

### Шаг 1: Создание нового Flow

1. Перейдите в раздел "Опросники" в панели администратора
2. Нажмите кнопку "Создать опросник"
3. Заполните основную информацию:
   - **Название** - понятное название для администраторов
   - **Описание** - подробное описание назначения опросника
   - **Активность** - включите опросник, чтобы он был доступен пользователям

### Шаг 2: Настройка начальной команды

1. Выберите существующую команду или создайте новую, которая будет запускать опросник
2. Заполните поля:
   - **Команда** - текст команды (например, `/survey` или `/start_poll`)
   - **Описание** - подробное описание команды
   - **Ответ** - текст, который получит пользователь при запуске опросника
   - **Тип** - выберите "slash" для команды, начинающейся с /
   - **Кнопки** - при необходимости добавьте кнопки для первого шага

### Шаг 3: Создание шагов опросника

Для каждого шага опросника:

1. Нажмите "Добавить шаг" в редакторе опросника
2. Заполните информацию о шаге:
   - **Команда** - идентификатор шага (не виден пользователю)
   - **Ответ** - текст вопроса для пользователя
   - **Тип** - выберите тип ожидаемого ответа (текст, число, кнопка и т.д.)
   - **Кнопки** - добавьте варианты ответов при необходимости
   - **Следующий шаг** - укажите, какой шаг должен следовать после этого

### Шаг 4: Настройка ветвления (условные переходы)

Если вам нужно добавить логику ветвления, то:

1. Выберите шаг, после которого будет ветвление
2. В разделе "Условия" нажмите "Добавить условие"
3. Настройте условие:
   - **Поле** - выберите поле ответа пользователя для проверки
   - **Оператор** - выберите оператор сравнения (равно, содержит, больше и т.д.)
   - **Значение** - введите значение для сравнения
   - **Следующий шаг** - укажите, на какой шаг перейти, если условие выполняется

### Шаг 5: Завершение опросника

1. Для последнего шага опросника установите опцию "Завершающий шаг"
2. Заполните поле "Ответ" с благодарностью или подтверждением завершения опросника

## Тестирование опросника

1. После создания опросника нажмите кнопку "Сохранить"
2. Затем нажмите "Тестировать" для предварительного просмотра
3. Вы можете протестировать опросник, отправив команду-триггер боту

## Просмотр результатов

Результаты опросников сохраняются в профиле каждого клиента:

1. Перейдите в раздел "Клиенты"
2. Выберите конкретного клиента
3. В разделе "Данные опросов" вы увидите историю всех пройденных опросников и ответы

## Советы по эффективному использованию

- **Начинайте с плана:** перед созданием опросника нарисуйте его схему на бумаге или в программе
- **Используйте ясные формулировки:** вопросы должны быть понятны пользователю
- **Не перегружайте:** старайтесь делать опросники не слишком длинными (5-7 шагов оптимально)
- **Тестируйте:** всегда проверяйте опросник перед запуском в производство
- **Анализируйте:** регулярно просматривайте результаты и оптимизируйте опросники

## Технические ограничения

- Максимальное количество шагов в одном опроснике: 50
- Максимальное количество вариантов ответа на один вопрос: 10
- Максимальная длина текста вопроса: 4096 символов 